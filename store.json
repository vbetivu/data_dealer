{"bad":"evening","mood":"compass","lake":"fire","affect":"tune","bring":"angry","operation":"parent","basis":"gentle","twice":"gas","use":"became","myself":"read","age":"thank","came":"whom","golden":"seeing","audience":"speak","early":"do","quietly":"method","source":"cry","sad":"log","flag":"final","trouble":"steam","lot":"problem","warn":"thee","about":"file::/images/about.png","due":"cover","higher":"wish","require":"began","twelve":"list","bet":"him","please":"saw","shadow":"cross","became":"pie","composition":"off","trade":"known","possibly":"electric","warm":"father","future":"door","long":"slept","volume":"noise","refused":"grew","dog":"collect","within":"advice","needed":"whenever","hat":"having","occur":"wing","applied":"signal","equal":"gold","hung":"giving","longer":"round","satellites":"happened","brick":"cloud","fierce":"century","copper":"locate","mission":"wrapped","barn":"pipe","money":"by","load":"house","former":"information","shown":"wave","disease":"broken","grandfather":"desert","globe":"situation","vowel":"neighbor","dawn":"corner","region":"wealth","book":"glad","angle":"center","successful":"mission","rocket":"free","kept":"source","nature":"scene","sudden":"letter","tent":"motor","although":"cheese","got":"camera","fly":"his","realize":"job","dot":"there","sheet":"wise","branch":"upon","ourselves":"arrive","remove":"history","cattle":"grain","suggest":"copy","birth":"you","everybody":"iron","perfectly":"tales","if":"through","donkey":"indicate","snake":"blew","personal":"unit","local":"afraid","atmosphere":"disappear","best":"fort","southern":"easy","steep":"sang","melted":"plus","height":"none","package":"percent","nearest":"college","under":"equally","known":"alike","shells":"highest","knife":"out","yes":"hollow","extra":"why","excited":"figure","death":"courage","torn":"season","face":"pocket","now":"apartment","supply":"tube","nest":"union","live":"ordinary","orbit":"spin","toy":"lost","curve":"thin","something":"tax","sweet":"great","dried":"silk","thread":"go","ants":"ourselves","hungry":"sometime","equipment":"fourth","differ":"noise","bent":"enjoy","interior":"said","told":"wrote","bus":"drawn","principal":"hill","above":"habit","cool":"scared","mind":"instant","composed":"impossible","guide":"lunch","classroom":"sport","salmon":"studied","spend":"medicine","wind":"period","different":"model","even":"bone","perfect":"now","his":"snake","opinion":"result","raise":"in","ran":"door","discovery":"popular","welcome":"tall","whispered":"might","highway":"structure","brush":"name","scale":"snow","weak":"gift","vertical":"warn","conversation":"source","system":"grandfather","announced":"serve","chamber":"tail","is":"modern","design":"valley","lunch":"suggest","represent":"outer","leather":"grain","dirty":"whatever","crowd":"brief","laid":"become","should":"fireplace","silent":"exchange","plastic":"breath","frequently":"subject","quick":"reader","iron":"gentle","yellow":"rope","second":"skill","cover":"push","ate":"combine","dark":"local","writing":"remarkable","east":"afraid","vessels":"solar","business":"topic","exist":"whose","visitor":"date","electricity":"life","snow":"rather","forward":"neighbor","ago":"nine","slightly":"examine","nearly":"feathers","recently":"steady","neighbor":"else","send":"pour","anywhere":"speed","magnet":"longer","dear":"flies","daily":"five","using":"serious","mean":"class","feet":"very","did":"year","cat":"image","over":"lesson","why":"force","daughter":"flower","struggle":"daily","poor":"manner","from":"let","port":"sentence","term":"shells","flight":"powder","does":"another","studied":"vessels","supper":"worse","corner":"increase","wise":"produce","hall":"shoe","harder":"harbor","club":"heart","instead":"high","move":"connected","swam":"crack","thou":"castle","pipe":"dirty","bank":"energy","would":"stairs","control":"traffic","add":"slave","shot":"nest","tropical":"right","aside":"practical","felt":"birth","tree":"town","accident":"soil","across":"property","whale":"young","sold":"prove","mainly":"cup","shade":"behind","fewer":"beat","pig":"instance","girl":"shadow","active":"chair","mountain":"bit","compass":"rule","home":"customs","speech":"monkey","so":"dug","season":"pretty","closer":"go","baseball":"give","plates":"hall","gas":"vertical","little":"promised","railroad":"beneath","faster":"behind","cap":"fruit","am":"consider","bread":"volume","cold":"replied","solid":"while","comfortable":"sugar","how":"feathers","plural":"all","environment":"government","track":"officer","mark":"husband","easier":"outer","left":"whistle","trace":"brother","according":"weight","variety":"sea","label":"region","get":"oxygen","large":"shadow","tales":"larger","positive":"later","until":"minute","tape":"rough","dungeon":"master","brain":"egg","labor":"yellow","crop":"troops","which":"appropriate","ought":"nice","probably":"eleven","wealth":"brick","bright":"parts","disappear":"review","numeral":"several","favorite":"finest","finger":"certainly","square":"rhyme","rubbed":"rapidly","gentle":"swung","broken":"bell","average":"therefore","belong":"from","hello":"back","dropped":"bee","union":"wet","complex":"primitive","stood":"jack","fix":"horse","shore":"running","major":"wing","studying":"month","other":"metal","main":"telephone","shoe":"crop","chemical":"simple","word":"sign","better":"bush","wooden":"remember","note":"worried","combination":"office","taken":"tape","correctly":"except","seeing":"mostly","plane":"recently","party":"does","seen":"creature","everyone":"hang","rod":"comfortable","traffic":"bring","gave":"meat","liquid":"edge","year":"paint","per":"explore","sink":"title","simply":"apart","stuck":"so","chicken":"do","softly":"country","school":"stared","everywhere":"because","pet":"cap","regular":"swung","method":"equally","post":"ship","tin":"introduced","tight":"left","serious":"hit","drove":"part","hailapula":"anywhere","flies":"fish","pool":"captain","willing":"rapidly","caught":"rough","bar":"hundred","continued":"brief","quickly":"declared","sent":"stay","agree":"anywhere","oil":"worth","alive":"secret","experience":"understanding","dollar":"flower","piano":"grabbed","work":"job","matter":"tea","independent":"major","both":"breeze","grandmother":"north","sets":"yesterday","natural":"rule","occasionally":"talk","order":"blind","attempt":"start","where":"help","replace":"post","joined":"scared","repeat":"quick","white":"occur","describe":"title","single":"silly","deer":"attention","gradually":"pay","interest":"made","land":"went","cream":"branch","west":"airplane","desert":"twice","each":"interior","they":"substance","yourself":"roll","led":"kitchen","situation":"fat","badly":"prevent","worried":"useful","given":"plate","keker":"use gtk::prelude::*;\n\nuse super::component::{ComponentProps, ComponentType};\n\nuse super::store::{Action, Connect, RowVariant, State};\nuse crate::utils::{add_child, add_children, write_to_clipboard, ClipboardValue};\n\npub type ListProps = Vec<RowVariant>;\n\npub struct ListContainer {\n    pub component: gtk::Box,\n}\n\nimpl ListContainer {\n    pub fn new(connect: &Connect) -> ListContainer {\n        let component = gtk::Box::new(gtk::Orientation::Horizontal, 0);\n\n        component.set_expand(true);\n\n        let list = List::new(connect.clone());\n\n        add_child(&component, &list.root);\n\n        connect.subscribe(\n            ComponentType::List(list),\n            Box::new(|state: &State| {\n                let State {\n                    rows_by_id, query, ..\n                } = state;\n\n                let query = query.trim();\n\n                let valid_map: Vec<(&String, &String)> = rows_by_id\n                    .iter()\n                    .filter(|(key, ..)| key.contains(query))\n                    .collect();\n\n                let mut headings: Vec<char> = valid_map\n                    .iter()\n                    .map(|(key, ..)| key.chars().next().unwrap())\n                    .collect();\n\n                headings.sort();\n                headings.dedup();\n\n                let mut result: Vec<RowVariant> = headings\n                    .into_iter()\n                    .map(|e| RowVariant::Heading(e))\n                    .collect();\n\n                let mut data: Vec<RowVariant> = valid_map\n                    .into_iter()\n                    .map(|(key, value)| RowVariant::Data(key.clone(), value.clone()))\n                    .collect();\n\n                result.append(&mut data);\n\n                result.sort_by(|a, b| get_row_variant_key(a).cmp(&get_row_variant_key(b)));\n\n                let result = result\n                    .into_iter()\n                    .map(|e| match e {\n                        RowVariant::Heading(x) => RowVariant::Heading(x.to_ascii_uppercase()),\n                        _ => e,\n                    })\n                    .collect();\n\n                return ComponentProps::List(result);\n            }),\n        );\n\n        ListContainer { component }\n    }\n}\n\npub struct List {\n    pub root: gtk::Box,\n    dispatcher: Connect,\n}\n\nimpl List {\n    pub fn new(dispatcher: Connect) -> List {\n        let root = gtk::Box::new(gtk::Orientation::Vertical, 8);\n\n        root.set_expand(true);\n\n        List { root, dispatcher }\n    }\n\n    pub fn render(&self, props: ListProps) {\n        let List { root, dispatcher } = self;\n\n        root.children().iter().for_each(|child| root.remove(child));\n\n        add_children(root, create_list(props, dispatcher));\n\n        root.show_all();\n    }\n}\n\nfn create_list(rows: Vec<RowVariant>, dispatcher: &Connect) -> Vec<gtk::Box> {\n    let mut sections: Vec<gtk::Box> = Vec::with_capacity(rows.len());\n\n    for row in rows {\n        let dispatcher = dispatcher.clone();\n\n        match row {\n            RowVariant::Heading(letter) => {\n                let section = gtk::Box::new(gtk::Orientation::Vertical, 0);\n\n                section.set_widget_name(\"letter_row\");\n\n                let label = gtk::Label::new(Some(&letter.to_string()));\n\n                label.set_widget_name(\"letter_label\");\n\n                add_child(&section, &label);\n                sections.push(section);\n            }\n            RowVariant::Data(key, value) => {\n                let section = gtk::Box::new(gtk::Orientation::Horizontal, 12);\n\n                section.set_widget_name(\"data_row\");\n\n                let content = if value.starts_with(\"file::/\") {\n                    create_image_content(&key, value)\n                } else {\n                    create_text_content(&key, value)\n                };\n\n                let delete_button = gtk::Button::new();\n                let delete_button_label = gtk::Label::new(Some(\"DEL\"));\n\n                delete_button.connect_clicked(move |_| {\n                    dispatcher.dispatch(Action::RemoveEntry(String::from(&key)))\n                });\n\n                add_child(&section, &content);\n\n                add_child(&section, add_child(&delete_button, &delete_button_label));\n\n                sections.push(section);\n            }\n        }\n    }\n\n    return sections;\n}\n\nfn create_text_content(key: &String, value: String) -> gtk::Button {\n    let content_button = gtk::Button::new();\n    content_button.set_widget_name(\"content_button\");\n    content_button.set_expand(true);\n\n    let wrapper = gtk::Box::new(gtk::Orientation::Horizontal, 8);\n\n    wrapper.set_homogeneous(true);\n\n    let key_label = gtk::Label::new(Some(&key));\n\n    key_label.set_halign(gtk::Align::Start);\n\n    let value_label = gtk::Label::new(Some(&value));\n\n    value_label.set_halign(gtk::Align::Start);\n\n    add_child(&wrapper, &key_label);\n    add_child(&wrapper, &value_label);\n\n    content_button.connect_clicked(move |_| write_to_clipboard(ClipboardValue::Text(&value)));\n\n    add_child(&content_button, &wrapper);\n\n    return content_button;\n}\n\nfn create_image_content(key: &String, value: String) -> gtk::Button {\n    let content_button = gtk::Button::new();\n    content_button.set_widget_name(\"content_button\");\n    content_button.set_expand(true);\n\n    let wrapper = gtk::Box::new(gtk::Orientation::Horizontal, 8);\n\n    let pixbuf = gdk::gdk_pixbuf::Pixbuf::from_file(&value[7..]).unwrap();\n\n    let key_label = gtk::Label::new(Some(&key));\n\n    key_label.set_halign(gtk::Align::Start);\n\n    add_child(&wrapper, &key_label);\n    add_child(&wrapper, &gtk::Image::from_pixbuf(Some(&pixbuf)));\n\n    content_button.connect_clicked(move |_| write_to_clipboard(ClipboardValue::Image(&pixbuf)));\n\n    add_child(&content_button, &wrapper);\n\n    return content_button;\n}\n\nfn get_row_variant_key(value: &RowVariant) -> String {\n    match value {\n        RowVariant::Heading(x) => x.to_string().to_ascii_lowercase(),\n        RowVariant::Data(x, _) => x.to_string().to_ascii_lowercase(),\n    }\n}\n","special":"at","tightly":"practical","select":"rocket","past":"airplane","excitement":"verb","indeed":"poem","important":"especially","month":"kill","purpose":"exchange","team":"structure","putting":"ball","mine":"instant","busy":"describe","addition":"wonderful","bit":"heading","stroke_is_my":"stroke_emoji","aloud":"greatly","had":"operation","feathers":"disappear","mud":"brown","stronger":"anyway","suddenly":"ill","outer":"discussion","lower":"unless","common":"settle","scientific":"period","nine":"dollar","floor":"outline","join":"comfortable","feel":"continent","breakfast":"cannot","darkness":"say","see":"pocket","valuable":"danger","view":"wood","everything":"younger","carefully":"waste","become":"laugh","maybe":"dried","watch":"say","gray":"solution","come":"passage","service":"forgot","constantly":"serve","cut":"baby","speak":"sweet","fifty":"other","threw":"usual","master":"dish","behind":"lake","name":"street","officer":"moon","dream":"own","plus":"fellow","rich":"bear","funny":"four","wash":"useful"}